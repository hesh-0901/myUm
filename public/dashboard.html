<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Dashboard - MyUm</title>

<script src="https://cdn.tailwindcss.com"></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css">
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">

<script>
tailwind.config = {
  theme: {
    extend: {
      colors: {
        primary: '#1A3668',
        medium: '#2596D9',
        lightblue: '#3FA9F5',
        danger: '#DC2626'
      },
      fontFamily: {
        display: ['Inter', 'sans-serif']
      }
    }
  }
}
</script>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="js/nav.js"></script>

</head>

<body class="bg-gray-100 font-display text-gray-800">

<div class="px-4 py-6 space-y-6 max-w-md mx-auto">

  <!-- 1️⃣ Taux de participation -->
  <div class="bg-white rounded-2xl shadow-md p-5">

    <div class="flex items-center gap-2 mb-4">
      <i class="bi bi-pie-chart-fill text-primary text-lg"></i>
      <h2 class="font-semibold text-sm">Taux de participation</h2>
    </div>

    <div class="flex justify-center">
      <canvas id="participationChart" width="180" height="180"></canvas>
    </div>

  </div>

  <!-- 2️⃣ Prochains rendez-vous -->
  <div class="bg-white rounded-2xl shadow-md p-5">

    <div class="flex items-center gap-2 mb-4">
      <i class="bi bi-calendar-event text-primary text-lg"></i>
      <h2 class="font-semibold text-sm">Prochains rendez-vous</h2>
    </div>

    <div class="space-y-3 text-sm">
      <div class="border rounded-xl p-3">
        <p class="font-medium">Répétition générale</p>
        <p class="text-gray-500">15 Juin • 18h00</p>
      </div>

      <div class="border rounded-xl p-3">
        <p class="font-medium">Concert spécial</p>
        <p class="text-gray-500">28 Juin • 20h00</p>
      </div>
    </div>

  </div>

  <!-- 3️⃣ Annonce -->
  <div class="bg-white rounded-2xl shadow-md p-5">

    <div class="flex items-center gap-2 mb-4">
      <i class="bi bi-megaphone-fill text-primary text-lg"></i>
      <h2 class="font-semibold text-sm">Annonce</h2>
    </div>

    <p class="text-sm">
      Répétition exceptionnelle ce samedi. Merci d’être ponctuels.
    </p>

  </div>

  <!-- 4️⃣ Alerte -->
  <div class="bg-white rounded-2xl shadow-md p-5 border-l-4 border-danger">

    <div class="flex items-center gap-2 mb-2">
      <i class="bi bi-exclamation-triangle-fill text-danger text-lg"></i>
      <h2 class="font-semibold text-sm text-danger">Alerte</h2>
    </div>

    <p class="text-sm text-gray-600">
      Vous avez 2 absences consécutives.
    </p>

  </div>

  <!-- 5️⃣ Actions rapides -->
  <div class="bg-white rounded-2xl shadow-md p-5">

    <h2 class="font-semibold text-sm mb-4">Actions rapides</h2>

    <div class="grid grid-cols-3 gap-4 text-center text-xs">

      <button class="flex flex-col items-center gap-2">
        <i class="bi bi-chat-dots-fill text-xl text-primary"></i>
        Messagerie
      </button>

      <button class="flex flex-col items-center gap-2">
        <i class="bi bi-calendar-week text-xl text-primary"></i>
        Agenda
      </button>

      <button class="flex flex-col items-center gap-2">
        <i class="bi bi-pencil-square text-xl text-primary"></i>
        Publication
      </button>

      <button class="flex flex-col items-center gap-2">
        <i class="bi bi-clipboard-check text-xl text-primary"></i>
        Présence
      </button>

      <button class="flex flex-col items-center gap-2">
        <i class="bi bi-file-earmark-text text-xl text-primary"></i>
        Justification
      </button>

    </div>

  </div>

</div>

<script>
// Données dynamiques exemple
const participation = 75;

const ctx = document.getElementById('participationChart').getContext('2d');

new Chart(ctx, {
  type: 'doughnut',
  data: {
    datasets: [{
      data: [participation, 100 - participation],
      backgroundColor: [
        participation >= 80 ? '#16A34A' :
        participation >= 60 ? '#F59E0B' : '#DC2626',
        '#E5E7EB'
      ],
      borderWidth: 0
    }]
  },
  options: {
    cutout: '70%',
    plugins: {
      tooltip: { enabled: false },
      legend: { display: false }
    }
  }
});
</script>
<script>
document.querySelectorAll(".nav-item").forEach(btn => {
  btn.addEventListener("click", () => {
    document.querySelectorAll(".nav-item").forEach(b => b.classList.remove("text-primary"));
    btn.classList.add("text-primary");
  });
});
</script>

  <script>
const presenceBtn = document.getElementById("presenceBtn");

presenceBtn.addEventListener("click", async () => {

  // 1️⃣ Vérifier si un salon de présence est actif (Firestore)
  // 2️⃣ Vérifier distance GPS si activée
  // 3️⃣ Marquer présence si validé

  alert("Recherche d'un salon de présence actif...");

});
</script>

</body>
</html>
